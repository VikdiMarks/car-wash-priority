(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[465],{72431:function(){},72149:function(e,t,a){Promise.resolve().then(a.bind(a,19069))},89987:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var s=a(57437),l=a(16691),r=a.n(l);function c(e){let{text:t}=e;return(0,s.jsxs)("div",{className:"flex-middle flex-col gap-4",children:[(0,s.jsx)(r(),{width:100,height:100,src:"/img/pictures/zero-content.png",alt:"Тут пусто"}),t&&(0,s.jsx)("p",{className:"text-black/40 text-center",children:t})]})}},59278:function(e,t,a){"use strict";a.d(t,{R:function(){return c},s:function(){return r}});var s=a(50117),l=a(30604);async function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;try{let a=await s.b.get("".concat("https://eco.null-it.com","/api/v2/organizations/").concat((0,l.v)("organization_id"),"/transactions?per_page=").concat(t,"&page=").concat(e));if(200===a.status)return a.data;return console.error("Ошибка при получении history:",a.status),!1}catch(e){return console.error("Ошибка при получении history:",e),!1}}async function c(){try{let e=await s.b.get("".concat("https://eco.null-it.com","/api/v2/organizations/").concat((0,l.v)("organization_id"),"/users"));if(200===e.status)return e.data;return console.error("Ошибка при получении users:",e.status),!1}catch(e){return console.error("Ошибка при получении users:",e),!1}}},19069:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return w}});var s,l=a(57437),r=a(89987),c=a(2265),n=a(57042),i=a(16691),o=a.n(i),d=a(83669);function u(e){let{type:t,value:a,user:s,date:r}=e;return(0,l.jsxs)("div",{className:"flex gap-2 p-1 w-full",children:[(0,l.jsxs)("div",{className:"flex flex-col justify-between items-center",children:[(0,l.jsx)(o(),{width:24,height:24,src:"/img/icons/".concat(t,".svg"),alt:"refill"===t?"Пополнение":"Списание"}),(0,l.jsx)("div",{className:"bg-black/10 w-[1px] h-[14px] mb-0.5"})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"text-sm text-black-100",children:[("debit"===t?"- ":"+ ")+a," ",(0,l.jsx)("span",{className:"font-bold",children:"₽"})]}),(0,l.jsx)("p",{className:"text-black/40",children:s?(0,d.u)(s.phone):""}),(0,l.jsx)("p",{className:"text-black/20",children:(0,d.p)(r)})]})]})}var x=a(773),m=a(24033);function h(e){let{text:t,path:a,icon:s}=e,r=(0,m.usePathname)(),c=(0,m.useRouter)();return(0,l.jsxs)("div",{className:(0,n.Z)("md:w-full rounded-lg flex items-center gap-3 p-3 md:p-3 md:px-5 lg:p-1.5 text-sm text-black-100 hover:bg-black/5 duration-300",{"bg-black/5 text-green--main font-semibold":r===a,"cursor-pointer":r!==a}),onClick:()=>c.push(a),children:[(0,l.jsx)(o(),{className:(0,n.Z)({"filter-svg-to-green":r===a}),width:24,height:24,src:"/img/icons/".concat(s,".svg"),alt:"Главная"}),(0,l.jsx)("p",{children:t})]})}var p=a(51178),f=a(70970),b=a(25827);a(6543);var g=a(30604),v=a(64164),j=a(59278),w=(s=function(e){let{children:t}=e,a=(0,m.usePathname)(),s=(0,m.useRouter)(),[i,d]=(0,c.useState)(!1),[g,w]=(0,c.useState)([]),[y,k]=(0,c.useState)([]),[N,Z]=(0,c.useState)(0),[z,C]=(0,c.useState)({}),[E,_]=(0,c.useState)({});(0,c.useEffect)(()=>{Z(window.innerWidth)},[]),(0,c.useEffect)(()=>{d("fill"===window.location.href.split("#")[1])},[]),(0,c.useEffect)(()=>{let e=async()=>{try{let e=await (0,b.D2)();e&&C(e)}catch(e){console.error("Ошибка при получении данных об организации",e)}};e()},[]),(0,c.useEffect)(()=>{let e=async()=>{try{let e=await (0,j.s)(1,999);e&&w(e.models)}catch(e){console.error("Ошибка при получении данных об организации",e)}};e()},[]),(0,c.useEffect)(()=>{let e=async()=>{try{let e=await (0,j.R)();e&&(console.log("users",e),k(e.data))}catch(e){console.error("Ошибка при получении данных об организации",e)}};e(),g&&g.map(e=>(e.user=y.find(t=>t.id===e.user_id),e))},[g]);let[S,T]=(0,c.useState)(!1),[R,M]=(0,c.useState)(!1);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:(0,n.Z)("flex w-screen min-h-screen max-h-screen bg-white md:flex-col md:max-h-full md:items-center"),children:[(0,l.jsxs)("header",{className:(0,n.Z)("w-full hidden justify-between items-center p-4 md:flex",{"fixed z-50 top-0 left-0 right-0":R,"relative z-50":!R}),children:[(0,l.jsx)("button",{className:"w-[35px] h-[30px] relative focus:outline-none p-2.5 bg-zinc-100 rounded",onClick:()=>M(!R),children:(0,l.jsxs)("div",{className:"block w-5 absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2",children:[(0,l.jsx)("span",{className:(0,n.Z)("block absolute h-[2px] w-5 bg-black bg-current transform transition duration-500 ease-in-out rounded",{"rotate-45":R,"-translate-y-1.5":!R})}),(0,l.jsx)("span",{className:(0,n.Z)("block absolute h-[2px] w-5 bg-black transform transition duration-500 ease-in-out rounded",{"opacity-0":R})}),(0,l.jsx)("span",{className:(0,n.Z)("block absolute h-[2px] w-5 bg-black transform  transition duration-500 ease-in-out rounded",{"-rotate-45":R," translate-y-1.5":!R})})]})}),(0,l.jsx)(o(),{width:"34",height:"42",src:"/img/logo.svg",alt:"Лого"}),(0,l.jsxs)("div",{className:"flex flex-col gap-1 items-center",children:[(0,l.jsx)("span",{className:"block opacity-60 text-zinc-900 text-[10px] font-semibold leading-tight",children:"Баланс"}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("span",{className:"text-zinc-900 text-2xl font-semibold leading-9",children:null==z?void 0:z.balance}),(0,l.jsx)(o(),{width:24,height:24,src:"/img/icons/currency-rub.svg",alt:"Знак рубля"})]})]})]}),(0,l.jsx)("aside",{className:(0,n.Z)("md:border-none overflow-hidden w-[252px] min-w-[252px] p-4 pt-6 lg:p-2 border-r border-solid border-black/10 md:w-full md:fixed md:min-h-screen md:max-h-screen top-0 left-0 md:bg-white z-30 md:justify-center transition-all duration-300 md:overflow-y-auto md:pt-28",{"translate-x-0":R,"md:-translate-x-full":!R}),children:(0,l.jsxs)("div",{className:"flex flex-col justify-between gap-[10px]",children:[(0,l.jsxs)("div",{className:"md:px-20",children:[(0,l.jsx)("div",{className:"md:py-4 text-center text-white text-sm font-semibold w-full py-2.5 px-2 bg-green--main rounded-2xl",children:(0,l.jsxs)("p",{children:["\xab",null==z?void 0:z.name,"\xbb"]})}),(0,l.jsxs)("div",{className:"bg-[#E5ECF6] py-[22px] px-6 w-full mt-4 rounded-2xl text-black-100 font-semibold md:hidden",children:[(0,l.jsxs)("div",{className:"text-sm flex justify-between items-center",children:[(0,l.jsx)("p",{children:"Баланс"}),(0,l.jsx)(o(),{width:24,height:24,src:"/img/icons/currency-rub.svg",alt:"Знак рубля"})]}),(0,l.jsx)("p",{className:"text-2xl mt-2 mb-6",children:null==z?void 0:z.balance}),(0,l.jsx)("div",{className:"md:block mt-4",children:(0,l.jsx)(x.Z,{type:"success-secondary",clickHandler:()=>T(!0),children:"Пополнить"})})]})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-1 md:mb-1 md:mt-4 md:items-center md:px-20",onClick:()=>M(!1),children:[(0,l.jsx)(h,{text:"Главная",icon:"statistic",path:"/home"}),(0,l.jsx)(h,{text:"Водители",icon:"car",path:"/drivers"}),(0,l.jsx)(h,{text:"История",icon:"box",path:"/history"}),(0,l.jsx)(h,{text:"Счета и акты",icon:"document",path:"/bills-and-acts"}),(0,l.jsx)(h,{text:"Настройки",icon:"passport",path:"/settings"}),(0,l.jsx)("div",{className:"mt-3 w-full",children:(0,l.jsx)(x.Z,{type:"danger-secondary",clickHandler:()=>{document.cookie="bearer_token=;expires=Thu, 01 Jan 1970 00:00:00 GMT;",document.cookie="phone=;expires=Thu, 01 Jan 1970 00:00:00 GMT;",document.cookie="organization_id=;expires=Thu, 01 Jan 1970 00:00:00 GMT;",s.push("/auth")},children:"Выйти"})})]}),N>768&&(0,l.jsxs)("div",{className:"relative flex-middle flex-col",children:[(0,l.jsx)("div",{className:"absolute top-0 h-[1px] left-[-16px] right-[-16px] bg-black/10"}),(0,l.jsx)(o(),{className:"my-4",width:36,height:42,src:"/img/logo.svg",alt:"Логотип"}),(0,l.jsx)("p",{className:"text-black/40 text-center",children:"\xa9 Car Wash Priority 2023"})]}),N<768&&(0,l.jsx)(v.Z,{})]})}),(0,l.jsxs)("div",{className:"w-full grow p-6 pb-4 lg:p-3 flex flex-col overflow-y-auto",children:[(0,l.jsx)("div",{className:"grow",children:t}),N>768&&(0,l.jsxs)("div",{className:"flex gap-12 text-black/40 mt-12 lg:flex-col lg:gap-3 lg:items-center",children:[(0,l.jsx)("a",{className:"hover:opacity-75 ml-auto lg:ml-0",href:"#",children:"Поддержка"}),(0,l.jsx)("a",{className:"hover:opacity-75",href:"#",children:"Политика конфиденциальности"}),(0,l.jsx)("a",{className:"hover:opacity-75",href:"/personal-data-processing",children:"Правила обработки персональных данных"})]})]}),"/history"!==a&&(0,l.jsxs)("aside",{className:(0,n.Z)("md:hidden md:block md:pb-5 md:mt-6 md:w-full md:border-t md:border-black/10 min-w-[252px] lg:px-2 relative w-[280px] border-l border-solid border-black/10 px-6 py-[72px] overflow-y-hidden",{"":!i,"flex flex-col gap-2 md:items-center":i}),children:[(0,l.jsx)("h6",{className:"text-black-100 text-sm font-semibold text-center absolute top-6 left-0 right-0 ",children:"История операций"}),g?(0,l.jsx)("div",{className:"w-full flex flex-col gap-2 items-center justify-items-start h-full overflow-y-auto",children:g.map(e=>(0,l.jsx)(u,{type:"waste"===e.type?"debit":"refill",value:e.value,user:e.user,date:e.created_at},e.id))}):(0,l.jsx)(r.Z,{text:"Тут будут отображаться операции по балансу организации"})]}),N<=768&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"relative flex-middle flex-col",children:[(0,l.jsx)("div",{className:"absolute top-0 h-[1px] left-[-16px] right-[-16px] bg-black/10"}),(0,l.jsx)(o(),{className:"my-4",width:36,height:42,src:"/img/logo.svg",alt:"Логотип"}),(0,l.jsx)("p",{className:"text-black/40 text-center",children:"\xa9 Car Wash Priority 2023"})]}),(0,l.jsxs)("div",{className:"pb-4 flex gap-12 text-black/40 mt-6 lg:flex-col lg:gap-3 lg:items-center",children:[(0,l.jsx)("a",{className:"hover:opacity-75 ml-auto lg:ml-0",href:"#",children:"Поддержка"}),(0,l.jsx)("a",{className:"hover:opacity-75",href:"#",children:"Политика конфиденциальности"}),(0,l.jsx)("a",{className:"hover:opacity-75",href:"/personal-data-processing",children:"Правила обработки персональных данных"})]})]})]}),(0,l.jsxs)(p.Z,{trigger:S,setTrigger:e=>T(e),title:"Пополнить баланс",children:[(0,l.jsxs)("div",{className:"flex-middle flex-col gap-3",children:[(0,l.jsx)("span",{children:"Укажите сумму пополнения."}),(0,l.jsx)("span",{children:"Счет будет отправлен на почту и появится на странице счетов"})]}),(0,l.jsx)(f.Z,{label:"Сумма пополнения",setValue:e=>_({sum:e})}),(0,l.jsx)("div",{className:"w-[388px] md:w-full",children:(0,l.jsx)(x.Z,{type:"success",clickHandler:async()=>{let e=await (0,b.Jp)(E);e&&(T(!1),_({}))},children:"Получить счет на оплату"})})]})]})},e=>((0,c.useEffect)(()=>{let e=(0,g.v)("bearer_token"),t=!1;e&&(t=!0),t||(0,m.redirect)("/auth")},[]),(0,l.jsx)(s,{...e})))},25827:function(e,t,a){"use strict";a.d(t,{D2:function(){return r},Jp:function(){return n},cK:function(){return c}});var s=a(30604),l=a(50117);async function r(){try{let e=await l.b.get("".concat("https://eco.null-it.com","/api/v2/organizations/").concat((0,s.v)("organization_id")));if(200===e.status)return e.data.data;return console.error("Ошибка при получении данных об организации:",e.status),!1}catch(e){return console.error("Ошибка при получении данных об организации:",e),!1}}async function c(){try{let e=await l.b.get("".concat("https://eco.null-it.com","/api/v2/organizations/").concat((0,s.v)("organization_id"),"/registration/get-pay-data"));if(200===e.status)return e.data.organization_pay_data;return console.error("Ошибка при отправке get-pay-data:",e.status),!1}catch(e){return console.error("Ошибка при отправке get-pay-data:",e),!1}}async function n(e){try{let t=await l.b.post("".concat("https://eco.null-it.com","/api/v2/organizations/").concat((0,s.v)("organization_id"),"/invoices/create"),e);if(200===t.status||201===t.status)return t.data;return console.log("res",t),alert(t),!1}catch(e){return alert(e.response.data.message),!1}}},64164:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var s=a(57437),l=a(57042),r=a(61396),c=a.n(r);function n(e){let{textColor:t}=e;return(0,s.jsxs)("footer",{className:(0,l.Z)("px-10 pb-3 flex md:flex-col-reverse items-center justify-between absolute md:static md:py-8 bottom-0 left-0 right-0",{"text-white":"white"===t,"text-black/40":"black"===t},"max-[800px]:flex-col-reverse max-[800px]:gap-4"),children:[(0,s.jsx)("p",{children:"\xa9 Car Wash Priority 2023"}),(0,s.jsxs)("div",{className:"flex md:flex-col items-center gap-12 max-[800px]:flex-col md:gap-2",children:[(0,s.jsx)("a",{className:"hover:opacity-75",href:"#",children:"Поддержка"}),(0,s.jsx)(c(),{className:"hover:opacity-75",href:"/personal-data-processing",children:"Правила обработки персональных данных"})]})]})}},773:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var s=a(57437),l=a(16691),r=a.n(l),c=a(57042);function n(e){let{type:t,children:a,icon:l,clickHandler:n,disabled:i=!1}=e;switch(console.log("disabled",i),t){case"medium-gray":return(0,s.jsx)("button",{onClick:n,className:"duration-500 hover:opacity-75 rounded-lg px-2 py-1 text-sm text-black-100 bg-black/5",disabled:i,children:a});case"medium-black":return(0,s.jsx)("button",{onClick:n,className:"duration-500 hover:opacity-75 rounded-lg px-2 py-1 text-sm text-white bg-black-100",disabled:i,children:a});case"success-secondary":return(0,s.jsx)("button",{onClick:n,className:"hover:bg-green--main hover:text-white duration-500 px-2 py-1 text-sm text-center w-full rounded-lg text-green--main border border-green--main",disabled:i,children:a});case"danger-secondary":return(0,s.jsx)("button",{onClick:n,className:"hover:bg-red--secondary hover:text-white duration-500 px-2 py-[13px] text-center w-full rounded-lg text-red--secondary border border-red--secondary",disabled:i,children:a});default:return(0,s.jsxs)("button",{onClick:n,className:(0,c.Z)("flex-middle gap-2 duration-300 hover:opacity-75  p-2 text-lg font-semibold text-center w-full rounded-lg",{"text-white bg-green--main":"success"===t,"text-white bg-red--secondary":"danger"===t,"text-black-100 bg-black/5":"secondary"===t},"max-[430px]:text-[16px]"),disabled:i,children:["arrow-left"===l&&(0,s.jsx)(r(),{width:20,height:20,src:"/img/icons/".concat(l,".svg"),alt:"Стрелка влево"}),a,"arrow-right"===l&&(0,s.jsx)(r(),{width:20,height:20,src:"/img/icons/".concat(l,".svg"),alt:"Стрелка вправо"})]})}}},70970:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var s=a(57437),l=a(16691),r=a.n(l),c=a(57042),n=a(57945),i=a.n(n);function o(e){let{disabled:t,value:a,setValue:l,type:n,label:o,placeholder:d,getOnlyNumber:u,invalidValue:x="",dataFocus:m,mask:h}=e;switch(n){case"one-number":return(0,s.jsx)("input",{tabIndex:m.split("-")[1],"data-focus":m,className:"focus:border-black/20 text-center w-[58px] h-[58px] flex-middle rounded-lg font-semibold text-2xl leading-[150%] border border-solid border-black/10 bg-white",type:"number",defaultValue:a,onChange:e=>{let t=document.querySelectorAll('[data-focus^="focus-"]');if(""===e.target.value?l(e.target.value):l(e.target.value.at(-1)),t.length>0){let a=Number(e.target.getAttribute("data-focus").split("-")[1])-1;t[a===t.length-1?0:a+1].focus()}}});case"big-input:disabled":return(0,s.jsxs)("div",{className:"relative w-[620px] lg:w-full",children:[o&&(0,s.jsx)("p",{className:"text-black/40 absolute top-4 left-5",children:o}),(0,s.jsx)("input",{className:"bg-white h-[74px] rounded-lg px-5 pt-[38px] pb-4 border border-solid border-black/10 text-sm text-black/20 placeholder:text-black/20 w-full focus:border-black/20",placeholder:d,disabled:!0,defaultValue:a}),(0,s.jsx)(r(),{className:"absolute bottom-4 right-5",width:16,height:16,src:"/img/icons/checkmark.svg",alt:"Подтверждено"})]});case"big-input":return(0,s.jsxs)("div",{className:"relative w-[620px] lg:w-full",children:[o&&(0,s.jsx)("p",{className:"text-black/40 absolute top-4 left-5",children:o}),(0,s.jsx)("input",{className:"bg-white h-[74px] rounded-lg px-5 pt-[38px] pb-4 border border-solid border-black/10 text-sm text-black-100 placeholder:text-black/20 w-full focus:border-black/20",placeholder:d,onChange:e=>l(e.target.value),defaultValue:a})]});case"mask-input":return(0,s.jsxs)("div",{className:"w-full flex flex-col gap-3",children:[o&&(0,s.jsx)("p",{className:"text-sm font-semibold text-black-100",children:o}),(0,s.jsx)(i(),{mask:h,maskChar:" ",value:a,onChange:e=>l(e.target.value),className:(0,c.Z)("text-sm text-black-100 placeholder:text-black/20 w-full rounded-lg px-4 py-2.5 border border-solid border-black/10 focus:border-black/20",{"text-black/20":t}),disabled:!!t,children:e=>(0,s.jsx)("input",{type:"text",placeholder:d,...e})})]});default:return console.log("invalidValue",x),(0,s.jsxs)("div",{className:"w-full flex flex-col gap-3",children:[o&&(0,s.jsx)("p",{className:"text-sm font-semibold text-black-100",children:o}),(0,s.jsx)("input",{type:u?"number":"text",className:(0,c.Z)("text-sm text-black-100 placeholder:text-black/20 w-full rounded-lg px-4 py-2.5 border border-solid border-black/10 focus:border-black/20",{"text-black/20":t}),placeholder:d,value:a,disabled:!!t,onChange:e=>l(e.target.value),style:{borderColor:x?"red":"inherit"}}),!!x&&(0,s.jsx)("span",{className:"text-sm",style:{color:"red"},children:x})]})}}},51178:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var s=a(57437),l=a(2265),r=a(62167),c=a(97870);function n(e){var t;let{trigger:a,setTrigger:n,title:i,children:o,classNameCustom:d}=e,u=(0,l.useRef)(null);return t=()=>n(!1),(0,l.useEffect)(()=>{let e=e=>{!u.current||u.current.contains(e.target)||t(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[u,t]),(0,l.useEffect)(()=>{a?document.getElementsByTagName("html")[0].style.overflowY="hidden":document.getElementsByTagName("html")[0].style.overflowY="auto"},[a]),(0,s.jsx)(r.M,{children:a&&(0,s.jsx)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,s.jsx)("div",{className:"fixed top-0 left-0 bottom-0 right-0 bg-black/25 flex-middle z-40 p-3",children:(0,s.jsxs)("div",{ref:u,className:"md:px-8 md:py-8 bg-white rounded-2xl px-36 py-14 flex-middle flex-col gap-7 max-w-[676px] "+d,children:[(0,s.jsxs)("div",{className:"flex-middle flex-col gap-2 max-w-[330px]",children:[(0,s.jsx)("h6",{className:"text-black-100 text-2xl font-semibold text-center",children:i}),(0,s.jsx)("p",{className:"text-black/40 text-sm text-center",children:o[0]})]}),o.slice(1)]})})})})}},50117:function(e,t,a){"use strict";a.d(t,{b:function(){return r}});var s=a(29222),l=a(30604);let r=s.Z.create({baseURL:"https://eco.null-it.com"});r.interceptors.request.use(e=>(e.headers.Authorization="Bearer "+(0,l.v)("bearer_token"),e))},30604:function(e,t,a){"use strict";function s(e){if("undefined"!=typeof document){let t=document.cookie.match(RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}}a.d(t,{v:function(){return s}})},83669:function(e,t,a){"use strict";function s(e){let t=e.replace(/\D/g,"");return 11!==t.length?(console.error("Incorrect phone number format"),e):"+".concat(t.slice(0,1)," (").concat(t.slice(1,4),") ").concat(t.slice(4,7),"-").concat(t.slice(7,9),"-").concat(t.slice(9))}function l(e){let t=new Date(e),a=t.getDate().toString().padStart(2,"0"),s=(t.getMonth()+1).toString().padStart(2,"0"),l=t.getFullYear(),r=t.getHours().toString().padStart(2,"0"),c=t.getMinutes().toString().padStart(2,"0");return"".concat(a,".").concat(s,".").concat(l," ").concat(r,":").concat(c)}a.d(t,{p:function(){return l},u:function(){return s}})}},function(e){e.O(0,[222,191,762,685,700,971,596,744],function(){return e(e.s=72149)}),_N_E=e.O()}]);