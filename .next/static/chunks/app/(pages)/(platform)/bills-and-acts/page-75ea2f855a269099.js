(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[750],{22812:function(e,t,l){Promise.resolve().then(l.bind(l,56070))},85029:function(e,t,l){"use strict";l.d(t,{Z:function(){return d}});var a=l(57437),s=l(2265),r=l(63251),n=l(47651),c=l(56887),o=l(86799),i=l(48793);function d(e){let{text:t,list:l,buttonClassName:d,menuClassName:u,itemClassName:x,callback:m,defaultValue:f}=e,[h,b]=s.useState(new Set([f?f.text:t])),g=s.useMemo(()=>Array.from(h).join(", ").replaceAll("_"," "),[h]);return(0,s.useEffect)(()=>{m(g)},[h]),(0,a.jsxs)(r.F,{children:[(0,a.jsx)(n.S,{children:(0,a.jsx)(c.A,{variant:"bordered",className:d,children:g})}),(0,a.jsx)(o.a,{"aria-label":"Single selection example",variant:"flat",disallowEmptySelection:!0,selectionMode:"single",selectedKeys:h,onSelectionChange:b,className:u,children:l.map(e=>(0,a.jsx)(i.W,{className:x,children:e.text},e.text))})]})}},56070:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return j}});var a=l(57437),s=l(2265),r=l(57042),n=l(16691),c=l.n(n),o=l(2397),i=l.n(o),d=l(50117),u=l(30604);async function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{let t=await d.b.get("".concat("https://eco.null-it.com","/api/v2/organizations/").concat((0,u.v)("organization_id"),"/invoices?page=").concat(e));if(200===t.status)return t.data;return console.error("Ошибка при получении invoices:",t.status),!1}catch(e){return console.error("Ошибка при получении invoices:",e),!1}}async function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{let t=await d.b.get("".concat("https://eco.null-it.com","/api/v2/organizations/").concat((0,u.v)("organization_id"),"/acts?page=").concat(e));if(200===t.status)return t.data;return console.error("Ошибка при получении invoices:",t.status),!1}catch(e){return console.error("Ошибка при получении invoices:",e),!1}}function f(e){let{id:t,created_at:l,status_name:s,uuid:n,type:o,document:i="",date:d="",value:u=""}=e;return(0,a.jsxs)("div",{className:"flex w-full text-black-100",children:[(0,a.jsxs)("div",{className:(0,r.Z)("flex items-center py-2 text-black-100 gap-2"),style:{flexBasis:"25%"},children:[(0,a.jsx)(c(),{width:24,height:24,src:"/img/icons/pdf.svg",alt:"Иконка PDF"}),(0,a.jsx)("p",{children:"bills"===o?"Номер счёта №".concat(t):"Номер акта №".concat(t)})]}),(0,a.jsxs)("div",{className:(0,r.Z)("flex items-center py-2 text-black-100"),style:{flexBasis:"25%"},children:[(0,a.jsx)(c(),{width:16,height:16,src:"/img/icons/calendar.svg",alt:"Иконка календаря"}),(0,a.jsx)("p",{children:d?new Date(d).toLocaleString():new Date(l).toLocaleString()})]}),"bills"===o?(0,a.jsxs)("div",{className:(0,r.Z)("flex items-center py-2 text-black-100 gap-2"),style:{flexBasis:"25%"},children:[(0,a.jsx)("div",{className:(0,r.Z)("w-[6px] h-[6px] rounded-full",{"bg-green--main":"paid"===s||"Оплачен"===s,"bg-red--secondary":"deposited"===s,"bg-[#59A8D4]":"wait_pay"===s})}),(0,a.jsx)("p",{className:(0,r.Z)({"text-green--main":"paid"===s||"Оплачен"===s,"text-red--secondary":"deposited"===s,"text-[#59A8D4]":"wait_pay"===s}),children:(()=>{switch(s){case"deposited":return"Не оплачен";case"wait_pay":return"Ожидание";case"paid":return"Оплачен";default:return s}})()})]}):(0,a.jsx)("div",{className:(0,r.Z)("flex items-center py-2 text-black-100 gap-2"),style:{flexBasis:"25%"},children:(0,a.jsx)("p",{children:u})}),(0,a.jsx)("a",{href:i,className:(0,r.Z)("flex items-center py-2 text-black-100 gap-2"),style:{flexBasis:"25%"},download:"bills"===o?"Счёт №".concat(t):"Акт №".concat(t),target:"_blank",children:(0,a.jsx)(c(),{className:"cursor-pointer mx-auto duration-300 hover:scale-125",width:16,height:16,src:"/img/icons/download.svg",alt:"Иконка загрузки"})})]})}function h(e){let{head:t,content:l=[],type:n="bills"}=e,[o,d]=(0,s.useState)("desc"),[u,x]=(0,s.useState)(0);return((0,s.useEffect)(()=>{x(window.innerWidth)},[]),console.log("content",l),u>768)?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex w-full border-b border-[#cccccc]",children:t.map((e,l)=>{let{title:s,canBeSorted:n}=e;return(0,a.jsxs)("div",{style:{flexBasis:"".concat(100/t.length,"%")},className:(0,r.Z)("flex items-center gap-1 text-black/40 py-3",{"px-4 border-l-black-low-opacity-gradient":0!==l}),children:[n&&(0,a.jsx)(c(),{onClick:()=>d("desc"===o?"asc":"desc"),className:(0,r.Z)("duration-300 cursor-pointer",{"[transform:rotateX(180deg)]":"asc"===o}),src:"/img/icons/arrow-sorting.svg",alt:"Сортировать",width:16,height:16}),(0,a.jsx)("p",{children:s})]},l)})}),l.map(e=>{let{id:t,uuid:l,status:s,status_name:r,sum:c,comment:o,created_at:i,document:d,date:u,value:x}=e;return(0,a.jsx)(f,{id:t,status_name:r,created_at:i,uuid:l,type:n,document:d,date:u,value:x},t)})]}):(0,a.jsx)(i(),{axis:"x",children:(0,a.jsxs)("div",{className:t.length<=4?"w-[600px]":"w-[900px]",children:[(0,a.jsx)("div",{className:"flex w-full border-b border-[#cccccc]",children:t.map((e,l)=>{let{title:s,canBeSorted:n}=e;return(0,a.jsxs)("div",{style:{flexBasis:"".concat(100/t.length,"%")},className:(0,r.Z)("flex items-center gap-1 text-black/40 py-3",{"px-4 border-l-black-low-opacity-gradient":0!==l}),children:[n&&(0,a.jsx)(c(),{onClick:()=>d("desc"===o?"asc":"desc"),className:(0,r.Z)("duration-300 cursor-pointer",{"[transform:rotateX(180deg)]":"asc"===o}),src:"/img/icons/arrow-sorting.svg",alt:"Сортировать",width:16,height:16}),(0,a.jsx)("p",{children:s})]},l)})}),l.map(e=>{let{id:t,uuid:l,status:s,status_name:r,sum:c,comment:o,created_at:i,document:d}=e;return(0,a.jsx)(f,{id:t,status_name:r,created_at:i,uuid:l,type:n,document:d},t)})]})})}function b(e){let{data:t}=e;return(0,a.jsx)(h,{head:[{title:"Название"},{title:"Дата",canBeSorted:!0},{title:"Статус"},{title:"Скачать"}],content:t,type:"bills"})}function g(e){let{data:t}=e;return(0,a.jsx)(h,{head:[{title:"Название"},{title:"Дата формирования",canBeSorted:!0},{title:"Значение"},{title:"Скачать"}],content:t,type:"acts"})}var p=l(89129),v=l(85029),w=l(1533);function j(){let[e,t]=(0,s.useState)("счета"),[l,n]=(0,s.useState)([]),[o,i]=(0,s.useState)([]),[d,u]=(0,s.useState)(""),[f,h]=(0,s.useState)(""),[j,y]=(0,s.useState)(""),[k,N]=(0,s.useState)(""),_=[{id:"",text:"Все"},{id:"wait_pay",text:"Ожидание"},{id:"paid",text:"Оплачен"},{id:"deposited",text:"Не оплачен"}],[S,C]=(0,s.useState)(1),[Z,B]=(0,s.useState)(0),E=e=>{u(e)},F=e=>{console.log("date",e),console.log("handleSearch",f),y(e)},P=e=>{console.log("date",e),N(e)};return(0,s.useEffect)(()=>{let t=async()=>{var t,a;let s=[];"счета"===e?(console.log("filter",l),s=await x(S)):"акты"===e&&(console.log("filter",o),s=await m(S)),(null===(a=s)||void 0===a?void 0:null===(t=a.meta)||void 0===t?void 0:t.total_pages)&&B(s.meta.total_pages),s=(s=(s=s.models).filter(e=>{let t=new Date(e.created_at),l=j?new Date(j):null,a=k?new Date(k):null;return l&&a?t>=l&&t<=a:l?t>=l:!a||t<=a})).filter(e=>"".concat(e.id).includes(d)),void 0!==f&&"акты"!==e&&(s=s.filter(e=>e.status_name.includes(f))),"счета"===e?n(s):i(s)};t()},[e,j,k,d,f,S]),(0,s.useEffect)(()=>{let e=async()=>{try{var e,t;let l=await x(S);l.models&&n(l.models),(null==l?void 0:null===(e=l.meta)||void 0===e?void 0:e.total_pages)&&(console.log("totalPages",null==l?void 0:null===(t=l.meta)||void 0===t?void 0:t.total_pages),B(l.meta.total_pages))}catch(e){console.error("Ошибка при получении данных об организации",e)}};e()},[]),(0,s.useEffect)(()=>{let e=async()=>{try{var e,t;let l=await m(S);l&&i(l.models),(null==l?void 0:null===(e=l.meta)||void 0===e?void 0:e.total_pages)&&(console.log("totalPages",null==l?void 0:null===(t=l.meta)||void 0===t?void 0:t.total_pages),B(l.meta.total_pages))}catch(e){console.error("Ошибка при получении данных об организации",e)}};e()},[]),(0,a.jsxs)("section",{className:"w-full h-full",children:[(0,a.jsxs)("nav",{className:"text-black/40 text-sm flex gap-8 ml-2",children:[(0,a.jsx)("button",{className:(0,r.Z)("before:transition-all before:duration-300 relative hover:text-black-100 duration-300 before:absolute before:bottom-[-4px] before:h-0.5 before:bg-black-100 before:rounded-lg","счета"===e?"cursor-default text-black-100 font-semibold before:w-full":"before:w-0"),onClick:()=>{C(1),t("счета")},children:"Счета"}),(0,a.jsx)("button",{className:(0,r.Z)("before:transition-all before:duration-300 relative hover:text-black-100 duration-300 before:absolute before:bottom-[-4px] before:h-0.5 before:bg-black-100 before:rounded-lg","акты"===e?"cursor-default text-black-100 font-semibold before:w-full":"before:w-0"),onClick:()=>{C(1),t("акты")},children:"Акты"})]}),(0,a.jsxs)("div",{className:"mt-6 mb-2 bg-[#F7F9FB] rounded-lg w-full p-2 flex items-center gap-4 md:gap-3.5 md:flex-wrap",children:[(0,a.jsxs)("div",{className:"relative grow w-full",children:[(0,a.jsx)(c(),{className:"absolute left-1.5 top-1/2 -translate-y-1/2",width:16,height:16,src:"/img/icons/search.svg",alt:"Поиск"}),(0,a.jsx)("input",{className:"focus:border-black/20 w-full border border-black/10 bg-white/80 rounded-lg text-sm px-4 py-2 pl-[26px] placeholder:text-black/20 text-black-100",placeholder:"Поиск",onChange:e=>E(e.target.value)})]}),"акты"!==e&&(0,a.jsxs)("div",{className:"relative min-w-[200px] md:w-full",children:[(0,a.jsx)(v.Z,{text:"Тип операции",list:_,buttonClassName:"w-full border border-black/10 bg-white/80 rounded-lg text-sm px-4 py-2 placeholder:text-black/20 text-black-100",menuClassName:"w-full border border-black/10 bg-white/80 rounded-lg w-[200px] text-center",itemClassName:"w-full flex justify-center items-center py-1 hover:border-[#F7F9FB] hover:bg-[#F7F9FB] rounded-lg hover:border-black/10",callback:e=>{let t=_.find(t=>t.text===e);console.log(t),h((null==t?void 0:t.id)?t.id:"")}}),(0,a.jsx)(c(),{className:"absolute right-3 top-1/2 -translate-y-1/2",width:16,height:16,src:"/img/icons/arrow-range.svg",alt:"Тип операции"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 md:w-full md:flex-col min-w-[300px]",children:[(0,a.jsx)("div",{className:"relative max-w-[166px] md:w-full md:max-w-full",children:(0,a.jsx)(p.Z,{format:"MM/dd/yyyy",className:"text-center w-full border border-black/10 bg-white/80 rounded-lg text-sm placeholder:text-black/20 text-black-100",placeholder:"Дата от",onChange:e=>F(e)})}),(0,a.jsx)("div",{className:"w-1 h-[1px] bg-black md:hidden"}),(0,a.jsx)("div",{className:"relative max-w-[166px] md:w-full md:max-w-full",children:(0,a.jsx)(p.Z,{format:"MM/dd/yyyy",className:"text-center w-full border border-black/10 bg-white/80 rounded-lg text-sm placeholder:text-black/20 text-black-100",placeholder:"Дата до",onChange:e=>P(e)})})]})]}),"счета"===e?(0,a.jsx)(b,{data:l}):(0,a.jsx)(g,{data:o}),Z>1&&(0,a.jsx)("div",{className:"w-full flex items-center justify-center",children:(0,a.jsx)(w.Z,{switchPage:e=>{C(e)},currentPage:S,totalPages:Z})})]})}l(96906)},1533:function(e,t,l){"use strict";l.d(t,{Z:function(){return i}});var a=l(57437),s=l(2265),r=l(12005),n=l(77485),c=l(57872);let o=e=>(0,a.jsx)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:(0,a.jsx)("path",{d:"M15.5 19l-7-7 7-7",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})});function i(e){let{switchPage:t,currentPage:l,totalPages:i}=e;return(0,a.jsx)(c.g,{disableCursorAnimation:!0,showControls:!0,total:i,initialPage:1,className:"gap-2",radius:"full",renderItem:e=>{let{ref:c,key:d,value:u,isActive:x,onNext:m,onPrevious:f,setPage:h,className:b}=e;return((0,s.useEffect)(()=>{console.log("currentPage",u)},[u]),u===r.m.NEXT)?(0,a.jsx)("button",{className:(0,n.cn)(b,"bg-default-200/50 min-w-8 w-8 h-8"),onClick:()=>{m(),l>=i||t(l+1)},children:(0,a.jsx)(o,{className:"rotate-180"})},d):u===r.m.PREV?(0,a.jsx)("button",{className:(0,n.cn)(b,"bg-default-200/50 min-w-8 w-8 h-8"),onClick:()=>{f(),l<=1||t(l-1)},children:(0,a.jsx)(o,{})},d):u===r.m.DOTS?(0,a.jsx)("button",{className:(0,n.cn)(b,"w-7 h-7"),children:"..."},d):(0,a.jsx)("button",{ref:c,className:(0,n.cn)(b,x&&"bg-black bg-opacity-5 rounded-lg","w-7 h-7 text-zinc-900 text-xs font-normal"),onClick:()=>{h(u),t(u)},children:u},d)},variant:"light"})}},50117:function(e,t,l){"use strict";l.d(t,{b:function(){return r}});var a=l(29222),s=l(30604);let r=a.Z.create({baseURL:"https://eco.null-it.com"});r.interceptors.request.use(e=>(e.headers.Authorization="Bearer "+(0,s.v)("bearer_token"),e))},30604:function(e,t,l){"use strict";function a(e){if("undefined"!=typeof document){let t=document.cookie.match(RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}}l.d(t,{v:function(){return a}})}},function(e){e.O(0,[247,222,191,762,309,43,971,596,744],function(){return e(e.s=22812)}),_N_E=e.O()}]);