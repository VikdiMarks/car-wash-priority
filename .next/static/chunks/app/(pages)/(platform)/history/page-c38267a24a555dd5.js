(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[430],{54289:function(e,t,l){Promise.resolve().then(l.bind(l,89612))},85029:function(e,t,l){"use strict";l.d(t,{Z:function(){return d}});var a=l(57437),s=l(2265),r=l(63251),n=l(47651),c=l(56887),i=l(86799),o=l(48793);function d(e){let{text:t,list:l,buttonClassName:d,menuClassName:u,itemClassName:x,callback:m,defaultValue:h}=e,[p,g]=s.useState(new Set([h?h.text:t])),f=s.useMemo(()=>Array.from(p).join(", ").replaceAll("_"," "),[p]);return(0,s.useEffect)(()=>{m(f)},[p]),(0,a.jsxs)(r.F,{children:[(0,a.jsx)(n.S,{children:(0,a.jsx)(c.A,{variant:"bordered",className:d,children:f})}),(0,a.jsx)(i.a,{"aria-label":"Single selection example",variant:"flat",disallowEmptySelection:!0,selectionMode:"single",selectedKeys:p,onSelectionChange:g,className:u,children:l.map(e=>(0,a.jsx)(o.W,{className:x,children:e.text},e.text))})]})}},89987:function(e,t,l){"use strict";l.d(t,{Z:function(){return n}});var a=l(57437),s=l(16691),r=l.n(s);function n(e){let{text:t}=e;return(0,a.jsxs)("div",{className:"flex-middle flex-col gap-4",children:[(0,a.jsx)(r(),{width:100,height:100,src:"/img/pictures/zero-content.png",alt:"Тут пусто"}),t&&(0,a.jsx)("p",{className:"text-black/40 text-center",children:t})]})}},59278:function(e,t,l){"use strict";l.d(t,{R:function(){return n},s:function(){return r}});var a=l(50117),s=l(30604);async function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;try{let l=await a.b.get("".concat("https://eco.null-it.com","/api/v2/organizations/").concat((0,s.v)("organization_id"),"/transactions?per_page=").concat(t,"&page=").concat(e));if(200===l.status)return l.data;return console.error("Ошибка при получении history:",l.status),!1}catch(e){return console.error("Ошибка при получении history:",e),!1}}async function n(){try{let e=await a.b.get("".concat("https://eco.null-it.com","/api/v2/organizations/").concat((0,s.v)("organization_id"),"/users"));if(200===e.status)return e.data;return console.error("Ошибка при получении users:",e.status),!1}catch(e){return console.error("Ошибка при получении users:",e),!1}}},89612:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return b}});var a=l(57437),s=l(2265),r=l(89987),n=l(16691),c=l.n(n),i=l(57042),o=l(2397),d=l.n(o),u=l(83669);function x(e){let{number:t,wash:l,date:s,value:r,type:n,user:i}=e;return(0,a.jsxs)("div",{className:"border-b border-black/5 flex w-full text-black-100",children:[(0,a.jsx)("div",{className:"flex items-center gap-1 basis-1/6 py-3",children:t}),(0,a.jsx)("div",{className:"flex items-center gap-1 basis-1/6 px-4 lg:px-3 py-3",children:i?(0,u.u)(i.phone):""}),(0,a.jsx)("div",{className:"basis-1/6 px-4 lg:px-3 py-3 flex items-center gap-[5px]",children:"waste"===n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-[6px] h-[6px] bg-red--secondary rounded-full"}),(0,a.jsx)("p",{className:"text-red--secondary",children:"Списание"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-[6px] h-[6px] bg-green--main rounded-full"}),(0,a.jsx)("p",{className:"text-[#59A8D4]",children:"Пополнение"})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-1 basis-1/6 px-4 lg:px-3 py-3",children:[r," ",(0,a.jsx)("span",{className:"font-bold",children:"₽"})]}),(0,a.jsx)("div",{className:"flex items-center gap-1 basis-1/6 px-4 lg:px-3 py-3 text-purple--secondary",children:(null==l?void 0:l.city)+","+(null==l?void 0:l.address)}),(0,a.jsxs)("div",{className:"flex items-center gap-1 basis-1/6 px-4 lg:px-3 py-3",children:[(0,a.jsx)(c(),{width:16,height:16,src:"/img/icons/calendar.svg",alt:"Иконка календаря"}),(0,a.jsx)("p",{children:(0,u.p)(s)})]})]})}function m(e){let{data:t={models:[]}}=e,[l,r]=(0,s.useState)(0);return((0,s.useEffect)(()=>{r(window.innerWidth)},[]),l>768)?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex w-full border-b border-[#cccccc]",children:["Номер операции","Источник","Тип операции","Сумма","Место посещения","Дата и время"].map((e,t)=>(0,a.jsx)("p",{className:"basis-1/6 text-black/40 py-3 lg:flex-middle lg:text-center px-4 border-l-black-low-opacity-gradient",children:e},t))}),t.map(e=>{let{id:t,wash:l,created_at:s,value:r,type:n,user:c}=e;return(0,a.jsx)(x,{number:t,wash:l,date:s,value:r,type:n,user:c},t)})]}):(0,a.jsx)(d(),{axis:"x",children:(0,a.jsxs)("div",{className:"w-[1000px]",children:[(0,a.jsx)("div",{className:"flex w-full border-b border-[#cccccc]",children:["Номер операции","Источник","Тип операции","Сумма","Место посещения","Дата и время"].map((e,t)=>(0,a.jsx)("h6",{className:(0,i.Z)("basis-1/6 text-black/40 py-3 lg:flex-middle lg:text-center",{"px-4 border-l-black-low-opacity-gradient":0!==t}),children:e},t))}),t.map(e=>{let{number:t,address:l,date:s,source:r,sum:n,type:c}=e;return(0,a.jsx)(x,{number:t,address:l,date:s,source:r,sum:n,type:c},t)})]})})}var h=l(59278),p=l(89129);l(96906);var g=l(85029),f=l(1533);function b(){let[e,t]=(0,s.useState)(null),[l,n]=(0,s.useState)(null),[i,o]=(0,s.useState)(""),[d,u]=(0,s.useState)(""),[x,b]=(0,s.useState)(""),[v,w]=(0,s.useState)(""),j=[{id:"",text:"Все"},{id:"waste",text:"Списание"},{id:"paid",text:"Пополнение"}],[N,y]=(0,s.useState)(1),[k,S]=(0,s.useState)(0),_=e=>{o(e)},C=e=>{console.log("date",e),console.log("handleSearch",d),b(e)},E=e=>{console.log("date",e),w(e)};return((0,s.useEffect)(()=>{let e=async()=>{var e,l;let a=[];(null===(l=a=await (0,h.s)(N))||void 0===l?void 0:null===(e=l.meta)||void 0===e?void 0:e.total_pages)&&S(a.meta.total_pages),a=(a=(a=a.models).filter(e=>{let t=new Date(e.created_at),l=x?new Date(x):null,a=v?new Date(v):null;return l&&a?t>=l&&t<=a:l?t>=l:!a||t<=a})).filter(e=>"".concat(e.id).includes(i)),void 0!==d&&(a=a.filter(e=>e.type.includes(d))),t(a)};e()},[x,v,i,d,N]),(0,s.useEffect)(()=>{let e=async()=>{try{var e;let l=await (0,h.s)(N);l&&t(l.models),(null==l?void 0:null===(e=l.meta)||void 0===e?void 0:e.total_pages)&&S(l.meta.total_pages)}catch(e){console.error("Ошибка при получении данных об организации",e)}};e()},[]),(0,s.useEffect)(()=>{let t=async()=>{try{let e=await (0,h.R)();e&&(console.log("users",e),n(e.data))}catch(e){console.error("Ошибка при получении данных об организации",e)}};t(),e&&l&&e.map(e=>(e.user=l.find(t=>t.id===e.user_id),e))},[e]),e)?(0,a.jsxs)("section",{className:"flex flex-col gap-7",children:[(0,a.jsxs)("div",{className:"bg-[#F7F9FB] rounded-lg w-full p-2 flex items-center gap-4 lg:gap-2 md:flex-wrap",children:[(0,a.jsxs)("div",{className:"relative w-2/3 md:w-full",children:[(0,a.jsx)(c(),{className:"absolute left-1.5 top-1/2 -translate-y-1/2",width:16,height:16,src:"/img/icons/search.svg",alt:"Поиск"}),(0,a.jsx)("input",{className:"w-full border border-black/10 bg-white/80 rounded-lg text-sm px-4 py-2 pl-[26px] placeholder:text-black/20 text-black-100",placeholder:"Поиск по водителю или месту",onChange:e=>_(e.target.value)})]}),(0,a.jsxs)("div",{className:"relative grow md:w-full min-w-[200px]",children:[(0,a.jsx)(g.Z,{text:"Тип операции",list:j,buttonClassName:"w-full border border-black/10 bg-white/80 rounded-lg text-sm px-4 py-2 placeholder:text-black/20 text-black-100",menuClassName:"w-full border border-black/10 bg-white/80 rounded-lg w-[200px] text-center",itemClassName:"w-full flex justify-center items-center py-1 hover:border-[#F7F9FB] hover:bg-[#F7F9FB] rounded-lg hover:border-black/10",callback:e=>{let t=j.find(t=>t.text===e);console.log(t),u((null==t?void 0:t.id)?t.id:"")}}),(0,a.jsx)(c(),{className:"absolute right-3 top-1/2 -translate-y-1/2",width:16,height:16,src:"/img/icons/arrow-range.svg",alt:"Тип операции"}),(0,a.jsx)(c(),{className:"absolute right-3 top-1/2 -translate-y-1/2",width:16,height:16,src:"/img/icons/arrow-range.svg",alt:"Тип операции"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 md:w-full md:flex-col min-w-[300px]",children:[(0,a.jsx)("div",{className:"relative max-w-[166px] md:w-full md:max-w-full",children:(0,a.jsx)(p.Z,{format:"MM/dd/yyyy",className:"text-center w-full border border-black/10 bg-white/80 rounded-lg text-sm placeholder:text-black/20 text-black-100",placeholder:"Дата от",onChange:e=>C(e)})}),(0,a.jsx)("div",{className:"w-1 h-[1px] bg-black md:hidden"}),(0,a.jsx)("div",{className:"relative max-w-[166px] md:w-full md:max-w-full",children:(0,a.jsx)(p.Z,{format:"MM/dd/yyyy",className:"text-center w-full border border-black/10 bg-white/80 rounded-lg text-sm placeholder:text-black/20 text-black-100",placeholder:"Дата до",onChange:e=>E(e)})})]})]}),(0,a.jsx)(m,{data:e}),k>1&&(0,a.jsx)("div",{className:"w-full flex items-center justify-center",children:(0,a.jsx)(f.Z,{switchPage:e=>{y(e)},currentPage:N,totalPages:k})})]}):(0,a.jsx)("div",{className:"flex-middle min-h-screen",children:(0,a.jsx)(r.Z,{text:"Тут будут отображаться операции по балансу организации"})})}},1533:function(e,t,l){"use strict";l.d(t,{Z:function(){return o}});var a=l(57437),s=l(2265),r=l(12005),n=l(77485),c=l(57872);let i=e=>(0,a.jsx)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:(0,a.jsx)("path",{d:"M15.5 19l-7-7 7-7",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})});function o(e){let{switchPage:t,currentPage:l,totalPages:o}=e;return(0,a.jsx)(c.g,{disableCursorAnimation:!0,showControls:!0,total:o,initialPage:1,className:"gap-2",radius:"full",renderItem:e=>{let{ref:c,key:d,value:u,isActive:x,onNext:m,onPrevious:h,setPage:p,className:g}=e;return((0,s.useEffect)(()=>{console.log("currentPage",u)},[u]),u===r.m.NEXT)?(0,a.jsx)("button",{className:(0,n.cn)(g,"bg-default-200/50 min-w-8 w-8 h-8"),onClick:()=>{m(),l>=o||t(l+1)},children:(0,a.jsx)(i,{className:"rotate-180"})},d):u===r.m.PREV?(0,a.jsx)("button",{className:(0,n.cn)(g,"bg-default-200/50 min-w-8 w-8 h-8"),onClick:()=>{h(),l<=1||t(l-1)},children:(0,a.jsx)(i,{})},d):u===r.m.DOTS?(0,a.jsx)("button",{className:(0,n.cn)(g,"w-7 h-7"),children:"..."},d):(0,a.jsx)("button",{ref:c,className:(0,n.cn)(g,x&&"bg-black bg-opacity-5 rounded-lg","w-7 h-7 text-zinc-900 text-xs font-normal"),onClick:()=>{p(u),t(u)},children:u},d)},variant:"light"})}},50117:function(e,t,l){"use strict";l.d(t,{b:function(){return r}});var a=l(29222),s=l(30604);let r=a.Z.create({baseURL:"https://eco.null-it.com"});r.interceptors.request.use(e=>(e.headers.Authorization="Bearer "+(0,s.v)("bearer_token"),e))},30604:function(e,t,l){"use strict";function a(e){if("undefined"!=typeof document){let t=document.cookie.match(RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}}l.d(t,{v:function(){return a}})},83669:function(e,t,l){"use strict";function a(e){let t=e.replace(/\D/g,"");return 11!==t.length?(console.error("Incorrect phone number format"),e):"+".concat(t.slice(0,1)," (").concat(t.slice(1,4),") ").concat(t.slice(4,7),"-").concat(t.slice(7,9),"-").concat(t.slice(9))}function s(e){let t=new Date(e),l=t.getDate().toString().padStart(2,"0"),a=(t.getMonth()+1).toString().padStart(2,"0"),s=t.getFullYear(),r=t.getHours().toString().padStart(2,"0"),n=t.getMinutes().toString().padStart(2,"0");return"".concat(l,".").concat(a,".").concat(s," ").concat(r,":").concat(n)}l.d(t,{p:function(){return s},u:function(){return a}})}},function(e){e.O(0,[247,222,191,762,309,43,971,596,744],function(){return e(e.s=54289)}),_N_E=e.O()}]);