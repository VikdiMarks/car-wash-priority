(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[714],{29269:function(e,t,a){Promise.resolve().then(a.bind(a,39857))},64164:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var r=a(57437),n=a(57042),s=a(61396),o=a.n(s);function c(e){let{textColor:t}=e;return(0,r.jsxs)("footer",{className:(0,n.Z)("px-10 pb-3 flex md:flex-col-reverse items-center justify-between absolute md:static md:py-8 bottom-0 left-0 right-0",{"text-white":"white"===t,"text-black/40":"black"===t},"max-[800px]:flex-col-reverse max-[800px]:gap-4"),children:[(0,r.jsx)("p",{children:"\xa9 Car Wash Priority 2023"}),(0,r.jsxs)("div",{className:"flex md:flex-col items-center gap-12 max-[800px]:flex-col md:gap-2",children:[(0,r.jsx)("a",{className:"hover:opacity-75",href:"#",children:"Поддержка"}),(0,r.jsx)(o(),{className:"hover:opacity-75",href:"/personal-data-processing",children:"Правила обработки персональных данных"})]})]})}},59241:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(57437);function n(e){let{title:t,children:a}=e;return(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"mb-2 text-2xl leading-[150%] font-semibold text-black-100",children:t}),(0,r.jsx)("p",{className:"text-sm text-black/40",children:a})]})}},22597:function(e,t,a){"use strict";a.d(t,{VP:function(){return o},aH:function(){return c},cy:function(){return l},oK:function(){return s}});var r=a(29222);a(24033);var n=a(50117);async function s(e){try{let t=await r.Z.post("".concat("https://eco.null-it.com","/api/v2/send-auth-code"),e);if(200===t.status)return!0;return console.error("Ошибка при отправке send-auth-code:",t.status),t.data}catch(e){return console.error("Ошибка при отправке send-auth-code:",e),e}}async function o(e){try{let t=await r.Z.post("".concat("https://eco.null-it.com","/api/v2/login"),e);if(200===t.status){let e=new Date(t.data.data.expires_at).getTime();return document.cookie="bearer_token="+t.data.data.bearer_token+"; path=/; samesite=lax; expires="+new Date(e).toUTCString(),!0}return t.data}catch(e){return console.error("Ошибка при авторизации:",e),e.response.data}}async function c(e){try{let t=await r.Z.post("".concat("https://eco.null-it.com","/api/v2/check-phone"),e);if(200===t.status)return t.data;return console.error("Ошибка при авторизации:",t.status),t.data}catch(e){return console.error("Ошибка при авторизации:",e),e.response.data}}async function l(){try{let e=await n.b.get("/api/v2/organizations/");if(200===e.status)return document.cookie="organization_id="+e.data.data[0].id,!0;return alert(e.data.message),console.log("Неудачное заполнение данных:",e.status),!1}catch(e){return console.log("error",e),!1}}},39857:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return y}});var r=a(57437),n=a(64164),s=a(16691),o=a.n(s),c=a(2265),l=a(57042),i=a(10093),d=a(82860),u=a(5459),x=a(773),p=a(24033),h=a(70970),m=a(51178),g=a(59241),f=a(22597);function b(e){let{phone:t,closeModal:a}=e,[n,s]=(0,c.useState)(["","","","","",""]),[l,i]=(0,c.useState)(""),d=(0,p.useRouter)(),u=async()=>{if(n.join("").length!==n.length){i("Количество символов в поле code должно быть не меньше "+n.length);return}let e=await (0,f.VP)({phone:t,code:n.join("")});e?(await (0,f.cy)(),d.push("/home")):a()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o(),{width:"80",height:"80",src:"/img/icons/phone.svg",alt:"Иконка телефона"}),(0,r.jsx)(g.Z,{title:"Верификация номера",children:"Мы отправили код подтверждения на номер:"}),(0,r.jsx)("div",{className:"text-lg font-semibold text-black-100",children:function(e){let t=e.replace(/\D/g,"");if(11!==t.length)return e;{t[0];let e=t.slice(1),a="(***) ***-".concat(e.slice(6,8),"-").concat(e.slice(8,10));return"+* ".concat(a)}}(t)}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"mb-3 text-sm font-semibold text-black-100",children:"Введите 6 цифры из сообщения"}),(0,r.jsx)("div",{className:"flex gap-2 items-center justify-center",children:n.map((e,t)=>(0,r.jsx)(h.Z,{dataFocus:"focus-".concat(t+1),type:"one-number",value:n[t],setValue:e=>{let a=[...n];a[t]=e,s(a)}},t))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"block mb-7 text-red-500 text-sm",children:l}),(0,r.jsx)(x.Z,{clickHandler:u,type:"success",children:"Подтвердить"}),(0,r.jsxs)("p",{className:"text-sm text-black/40 text-center mt-4",children:["Не получили код?"," ",(0,r.jsx)("a",{className:"text-purple--main",href:"#",onClick:()=>(0,f.oK)({phone:t}),children:"Выслать новый"})," ","или"," ",(0,r.jsx)("a",{className:"text-purple--main",href:"#",children:"Позвоните нам"})]})]})]})}var v=a(13477);a(57945);var k=a(61396),j=a.n(k);function y(){var e,t;let[a,s]=(0,c.useState)(!0),[g,k]=(0,c.useState)({phone:""}),[y,w]=(0,c.useState)({phone:"",inn:""}),[N,_]=(0,c.useState)(!1),[Z,C]=(0,c.useState)({phone:!1,inn:!1}),[z,E]=(0,c.useState)({auth:"",reg:""}),S=(0,p.useRouter)();(0,p.usePathname)();let R=(0,p.useSearchParams)(),P=(0,c.useCallback)((e,t)=>{let a=new URLSearchParams(R.toString());return a.set(e,t),a.toString()},[R]),V=(0,c.useRef)(null),T=async()=>{var e;let t=await (0,f.aH)(g);if(console.log("checkPhoneStatus",t),null===(e=t.errors)||void 0===e?void 0:e.phone){E(e=>({...e,errors:{phone:t.errors.phone}}));return}if(!t.exists){E(e=>({...e,errors:{phone:"Этот номер телефона не зарегистрирован"}}));return}let r=await (0,f.oK)(g);if(console.log("isValid",r,a),a&&!0===r)document.cookie="phone="+g.phone+"; path=/; samesite=lax;",S.push("/auth/registration?"+P("type","login")),E({auth:"",reg:""});else{if(409===r.response.status){E(e=>({...e,auth:"До следующей отправки осталось "+r.response.data.message+"с"}));return}E(e=>({...e,auth:r.response.data.message,errors:r.response.data.errors}))}},D=async()=>{var e;let t=await (0,f.aH)(g);if(null===(e=t.errors)||void 0===e?void 0:e.phone){E(e=>({...e,errors:{phone:t.errors.phone}}));return}if(t.exists){E(e=>({...e,errors:{phone:"Этот номер телефона уже зарегистрирован другим пользователем"}}));return}let a=await (0,v.YD)(y);document.cookie="inn="+y.inn+"; path=/; samesite=lax;",a.errors?E(e=>({...e,reg:a.message,errors:a.errors})):(S.push("/auth/registration"),E({auth:"",reg:""}))},L=(e,t,a)=>{t.trim().length<a?(E(e=>({...e,reg:"Поле инн имеет ошибочный формат"})),C({...Z,[e]:!1})):C({...Z,[e]:!0})};return(0,r.jsxs)("section",{className:"px-12 py-20 flex justify-end max-[1030px]:px-6 max-[800px]:pb-40 max-[800px]:pt-6 max-[1030px]:justify-center items-center relative bg-[url('/img/backgrounds/auth.jpg')] w-screen min-h-screen bg-no-repeat bg-cover bg-center",children:[(0,r.jsxs)("div",{className:"flex gap-8 items-center",children:[(0,r.jsxs)("div",{className:"text-white text-[108px] text-right leading-[140%] max-[1030px]:hidden",children:[(0,r.jsx)("p",{className:"font-black",children:"Car"}),(0,r.jsx)("p",{className:"font-black",children:"Wash"}),(0,r.jsx)("p",{className:"font-black",children:"Priority"})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-7 max-w-[484px] bg-white rounded-2xl p-12 max-[530px]:p-8 max-[430px]:p-4 md:fixed md:rounded-none top-0 left-0 right-0 bottom-0",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2 items-center",children:[(0,r.jsx)(o(),{width:56,height:70,src:"/img/logo.svg",alt:"Логотип"}),(0,r.jsx)("p",{className:"text-black-100 text-lg font-semibold text-center",children:"Корпоративный портал"})]}),(0,r.jsxs)("div",{className:"rounded-xl bg-black/5 px-2 py-1",children:[(0,r.jsx)("p",{onClick:()=>{s(!0),E({auth:"",reg:""})},className:(0,l.Z)("transition-colors inline-block w-1/2 text-center text-sm py-1 px-2 rounded-lg",{"text-black-100 cursor-pointer hover:bg-black/5":!a,"text-white bg-green--main":a},"max-[430px]:text-[12px] max-[430px]:px-1"),children:"Вход"}),(0,r.jsx)("p",{onClick:()=>{s(!1),E({auth:"",reg:""})},className:(0,l.Z)("duration-300 inline-block w-1/2 text-center text-sm py-1 px-2 rounded-lg",{"text-black-100 cursor-pointer hover:bg-black/5":a,"text-white bg-green--main":!a},"max-[430px]:text-[12px] max-[430px]:px-1"),children:"Регистрация"})]}),(0,r.jsx)("div",{className:"bg-black/10 h-[1px]"}),(0,r.jsx)(i.ZP,{timeout:500,in:a,children:e=>(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2 react-transition-group-slide-right-".concat(e),children:[(0,r.jsx)("h1",{className:"text-2xl leading-[150%] font-semibold text-black-100",children:a?"Войдите":"Регистрация"}),(0,r.jsx)("p",{className:"text-sm text-black/40 text-center",children:a?"в личный кабинет компании":"создайте личный кабинет компании"})]})}),(0,r.jsxs)("div",{className:"flex flex-col gap-7",children:[(0,r.jsx)(h.Z,{value:g.phone,setValue:e=>{k({phone:e.replace(/[\s-()+]/g,"")}),w({...y,phone:e.replace(/[\s-()+]/g,"")}),L("phone",e,11)},placeholder:"+7 (___) ___-__-__",mask:"+7 (999) 999-99-99",type:"mask-input",getOnlyNumber:!0}),(0,r.jsx)("span",{className:"text-red-500 text-sm",children:null==z?void 0:null===(e=z.errors)||void 0===e?void 0:e.phone}),!a&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{placeholder:"ИНН организации",getOnlyNumber:!0,setValue:e=>{w({...y,inn:e}),L("inn",e,8)}}),(0,r.jsx)("span",{className:"text-red-500 text-sm",children:null==z?void 0:null===(t=z.errors)||void 0===t?void 0:t.inn})]})]}),(0,r.jsx)(x.Z,{type:"success",clickHandler:a?T:D,children:(0,r.jsx)(d.Z,{children:(0,r.jsx)(u.Z,{nodeRef:V,classNames:"react-transition-group-fade",addEndListener:e=>{V.current.addEventListener("transitionend",e,!1)},children:(0,r.jsx)("span",{ref:V,children:a?"Войти":"Зарегистрироваться"})},a)})}),(0,r.jsxs)("p",{className:"text-sm text-black/40 text-center max-[430px]:text-[12px]",children:["Продолжая использовать сервис, вы соглашаетесь с"," ",(0,r.jsx)(j(),{className:"text-purple--main",href:"/personal-data-processing",children:"политикой конфиденциальности"})," ","и"," ",(0,r.jsx)("a",{className:"text-purple--main",href:"#",children:"правилами предоставления услуг"})]})]})]}),(0,r.jsx)(n.Z,{textColor:"white"}),(0,r.jsxs)(m.Z,{trigger:N,setTrigger:e=>_(e),classNameCustom:"md:h-full",children:[(0,r.jsx)("span",{}),(0,r.jsx)(b,{phone:g.phone,closeModal:()=>_(!1)})]})]})}},13477:function(e,t,a){"use strict";a.d(t,{ss:function(){return p},D2:function(){return u},cK:function(){return x},YD:function(){return o},CH:function(){return d},pF:function(){return i},a_:function(){return l},eq:function(){return c}});var r=a(29222),n=a(50117);function s(e){let t=document.cookie.match(RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return console.log({operation:"readCookie",matches:t,name:e}),t?decodeURIComponent(t[1]):void 0}async function o(e){try{let t=await r.Z.post("".concat("https://eco.null-it.com","/api/v2/organizations/registration/create"),e);if(document.cookie="organization_id=; expires=-1;",document.cookie="phone=; expires=-1;",200===t.status)return document.cookie="organization_id="+t.data.organization_id,document.cookie="phone="+e.phone,!0;return console.log("Произошла ошибка в запросе на авторизацию:",t.status),!1}catch(e){return console.log("Произошла ошибка в запросе на авторизацию:",e),e.response.data}}async function c(e){try{let t=await r.Z.post("".concat("https://eco.null-it.com","/api/v2/organizations/registration/auth"),e);if(document.cookie="bearer_token=;expires=Thu, 01 Jan 1970 00:00:00 GMT;",200!==t.status)return console.log("Неудачная проверка номера:",t.status),t;{let e=new Date(t.data.auth.expires_at).getTime();return document.cookie="bearer_token="+t.data.auth.bearer_token+"; path=/; samesite=lax; expires="+new Date(e).toUTCString(),!0}}catch(e){return console.log("Неудачная проверка номера:",e),e.response.data.errors}}async function l(e){try{let t=await n.b.post("/api/v2/organizations/".concat(s("organization_id"),"/registration/set-data"),e);if(200===t.status)return!0;return console.log("Неудачное заполнение данных:",t.status),!1}catch(e){return console.log("Неудачное заполнение данных:",e),e.response.data.errors}}async function i(e){try{let t=await n.b.post("/api/v2/organizations/".concat(s("organization_id"),"/registration/set-pay-data"),e);if(200===t.status)return!0;return console.log("Неудачное заполнение данных:",t.status),!1}catch(e){return console.log("Неудачное заполнение данных:",e),e.response.data.errors}}async function d(e){try{let t=await n.b.post("/api/v2/organizations/".concat(s("organization_id"),"/registration/set-contact-data"),e);if(200===t.status)return!0;return console.log("Неудачное заполнение данных:",t.status),!1}catch(e){return console.log("Неудачное заполнение данных:",e),e.response.data.errors}}async function u(){try{let e=await n.b.get("".concat("https://eco.null-it.com","/api/v2/organizations/").concat(s("organization_id")));if(200===e.status)return e.data.data;return console.log("Неудачная проверка данных:",e.status),!1}catch(e){return console.log("Неудачная проверка данных:",e),e.response.data.errors}}async function x(){try{let e=await n.b.get("".concat("https://eco.null-it.com","/api/v2/organizations/").concat(s("organization_id"),"/registration/get-pay-data"));if(200===e.status)return e.data;return console.log("get-pay-data:",e.status),!1}catch(e){return console.log("get-pay-data:",e),e.response.data.errors}}async function p(e){try{let t=await n.b.post("/api/v2/organizations/".concat(s("organization_id"),"/invoices/create-by-calc"),e);if(200===t.status||201===t.status)return t.data.organization_invoice;return console.log("Неудачное заполнение данных:",t.status),!1}catch(e){return console.log("Неудачное заполнение данных:",e),e.response.data.errors}}},773:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var r=a(57437),n=a(16691),s=a.n(n),o=a(57042);function c(e){let{type:t,children:a,icon:n,clickHandler:c,disabled:l=!1}=e;switch(console.log("disabled",l),t){case"medium-gray":return(0,r.jsx)("button",{onClick:c,className:"duration-500 hover:opacity-75 rounded-lg px-2 py-1 text-sm text-black-100 bg-black/5",disabled:l,children:a});case"medium-black":return(0,r.jsx)("button",{onClick:c,className:"duration-500 hover:opacity-75 rounded-lg px-2 py-1 text-sm text-white bg-black-100",disabled:l,children:a});case"success-secondary":return(0,r.jsx)("button",{onClick:c,className:"hover:bg-green--main hover:text-white duration-500 px-2 py-1 text-sm text-center w-full rounded-lg text-green--main border border-green--main",disabled:l,children:a});case"danger-secondary":return(0,r.jsx)("button",{onClick:c,className:"hover:bg-red--secondary hover:text-white duration-500 px-2 py-[13px] text-center w-full rounded-lg text-red--secondary border border-red--secondary",disabled:l,children:a});default:return(0,r.jsxs)("button",{onClick:c,className:(0,o.Z)("flex-middle gap-2 duration-300 hover:opacity-75  p-2 text-lg font-semibold text-center w-full rounded-lg",{"text-white bg-green--main":"success"===t,"text-white bg-red--secondary":"danger"===t,"text-black-100 bg-black/5":"secondary"===t},"max-[430px]:text-[16px]"),disabled:l,children:["arrow-left"===n&&(0,r.jsx)(s(),{width:20,height:20,src:"/img/icons/".concat(n,".svg"),alt:"Стрелка влево"}),a,"arrow-right"===n&&(0,r.jsx)(s(),{width:20,height:20,src:"/img/icons/".concat(n,".svg"),alt:"Стрелка вправо"})]})}}},70970:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var r=a(57437),n=a(16691),s=a.n(n),o=a(57042),c=a(57945),l=a.n(c);function i(e){let{disabled:t,value:a,setValue:n,type:c,label:i,placeholder:d,getOnlyNumber:u,invalidValue:x="",dataFocus:p,mask:h}=e;switch(c){case"one-number":return(0,r.jsx)("input",{tabIndex:p.split("-")[1],"data-focus":p,className:"focus:border-black/20 text-center w-[58px] h-[58px] flex-middle rounded-lg font-semibold text-2xl leading-[150%] border border-solid border-black/10 bg-white",type:"number",defaultValue:a,onChange:e=>{let t=document.querySelectorAll('[data-focus^="focus-"]');if(""===e.target.value?n(e.target.value):n(e.target.value.at(-1)),t.length>0){let a=Number(e.target.getAttribute("data-focus").split("-")[1])-1;t[a===t.length-1?0:a+1].focus()}}});case"big-input:disabled":return(0,r.jsxs)("div",{className:"relative w-[620px] lg:w-full",children:[i&&(0,r.jsx)("p",{className:"text-black/40 absolute top-4 left-5",children:i}),(0,r.jsx)("input",{className:"bg-white h-[74px] rounded-lg px-5 pt-[38px] pb-4 border border-solid border-black/10 text-sm text-black/20 placeholder:text-black/20 w-full focus:border-black/20",placeholder:d,disabled:!0,defaultValue:a}),(0,r.jsx)(s(),{className:"absolute bottom-4 right-5",width:16,height:16,src:"/img/icons/checkmark.svg",alt:"Подтверждено"})]});case"big-input":return(0,r.jsxs)("div",{className:"relative w-[620px] lg:w-full",children:[i&&(0,r.jsx)("p",{className:"text-black/40 absolute top-4 left-5",children:i}),(0,r.jsx)("input",{className:"bg-white h-[74px] rounded-lg px-5 pt-[38px] pb-4 border border-solid border-black/10 text-sm text-black-100 placeholder:text-black/20 w-full focus:border-black/20",placeholder:d,onChange:e=>n(e.target.value),defaultValue:a})]});case"mask-input":return(0,r.jsxs)("div",{className:"w-full flex flex-col gap-3",children:[i&&(0,r.jsx)("p",{className:"text-sm font-semibold text-black-100",children:i}),(0,r.jsx)(l(),{mask:h,maskChar:" ",value:a,onChange:e=>n(e.target.value),className:(0,o.Z)("text-sm text-black-100 placeholder:text-black/20 w-full rounded-lg px-4 py-2.5 border border-solid border-black/10 focus:border-black/20",{"text-black/20":t}),disabled:!!t,children:e=>(0,r.jsx)("input",{type:"text",placeholder:d,...e})})]});default:return console.log("invalidValue",x),(0,r.jsxs)("div",{className:"w-full flex flex-col gap-3",children:[i&&(0,r.jsx)("p",{className:"text-sm font-semibold text-black-100",children:i}),(0,r.jsx)("input",{type:u?"number":"text",className:(0,o.Z)("text-sm text-black-100 placeholder:text-black/20 w-full rounded-lg px-4 py-2.5 border border-solid border-black/10 focus:border-black/20",{"text-black/20":t}),placeholder:d,value:a,disabled:!!t,onChange:e=>n(e.target.value),style:{borderColor:x?"red":"inherit"}}),!!x&&(0,r.jsx)("span",{className:"text-sm",style:{color:"red"},children:x})]})}}},51178:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var r=a(57437),n=a(2265),s=a(62167),o=a(97870);function c(e){var t;let{trigger:a,setTrigger:c,title:l,children:i,classNameCustom:d}=e,u=(0,n.useRef)(null);return t=()=>c(!1),(0,n.useEffect)(()=>{let e=e=>{!u.current||u.current.contains(e.target)||t(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[u,t]),(0,n.useEffect)(()=>{a?document.getElementsByTagName("html")[0].style.overflowY="hidden":document.getElementsByTagName("html")[0].style.overflowY="auto"},[a]),(0,r.jsx)(s.M,{children:a&&(0,r.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,r.jsx)("div",{className:"fixed top-0 left-0 bottom-0 right-0 bg-black/25 flex-middle z-40 p-3",children:(0,r.jsxs)("div",{ref:u,className:"md:px-8 md:py-8 bg-white rounded-2xl px-36 py-14 flex-middle flex-col gap-7 max-w-[676px] "+d,children:[(0,r.jsxs)("div",{className:"flex-middle flex-col gap-2 max-w-[330px]",children:[(0,r.jsx)("h6",{className:"text-black-100 text-2xl font-semibold text-center",children:l}),(0,r.jsx)("p",{className:"text-black/40 text-sm text-center",children:i[0]})]}),i.slice(1)]})})})})}},50117:function(e,t,a){"use strict";a.d(t,{b:function(){return s}});var r=a(29222),n=a(30604);let s=r.Z.create({baseURL:"https://eco.null-it.com"});s.interceptors.request.use(e=>(e.headers.Authorization="Bearer "+(0,n.v)("bearer_token"),e))},30604:function(e,t,a){"use strict";function r(e){if("undefined"!=typeof document){let t=document.cookie.match(RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}}a.d(t,{v:function(){return r}})}},function(e){e.O(0,[222,191,762,685,527,971,596,744],function(){return e(e.s=29269)}),_N_E=e.O()}]);