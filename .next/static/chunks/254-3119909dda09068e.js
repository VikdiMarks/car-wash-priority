"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[254],{10254:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var r=a(57437),n=a(57042);a(77469);var l=a(70970),c=a(50079),s=a(773),i=a(51178),o=a(2265),d=a(16691),u=a.n(d),x=a(80476),p=a(83669);function g(e){let{phone:t,balance:a,races:l,deleteDriver:c,editDriver:s,id:i,updateDrivers:d}=e,[g,m]=(0,o.useState)(a),[b,h]=(0,o.useState)(""),f=async e=>{try{let t=await (0,x.Lu)({balance:e},i);t&&(await d(),m(e),h(""))}catch(e){h(e.response.data.message)}};return(0,r.jsxs)("div",{className:"flex w-full text-black-100",children:[(0,r.jsx)("div",{className:"flex basis-1/4 items-center px-4 lg:px-1 py-2",children:(0,p.u)(t)}),(0,r.jsxs)("div",{className:"flex-middle basis-1/4 px-4 lg:px-1 py-2 flex-col gap-1",children:[(0,r.jsx)("input",{className:(0,n.Z)("text-sm md:text-xs p-1 bg-white border border-black/10 rounded-lg w-full flex-middle text-center",{"text-green--main":g>50,"text-red-600":g<50}),defaultValue:g,onChange:async e=>{await f(e.target.value)}}),b&&(0,r.jsx)("span",{className:"text-red-600",children:b})]}),(0,r.jsx)("div",{className:"flex-middle basis-1/4 px-4 lg:px-1 py-2",children:l}),(0,r.jsx)("div",{className:"flex-middle basis-1/4 px-4 lg:px-1 py-2 justify-evenly",children:(0,r.jsx)(u(),{className:"cursor-pointer duration-300 hover:scale-125",width:20,height:20,src:"/img/icons/trash-can.svg",alt:"Удалить",onClick:c})})]})}function m(e){let{drivers:t=[],updateDrivers:a}=e,[d,u]=(0,o.useState)({editDriver:!1,deleteDriver:!1}),[m,b]=(0,o.useState)({telephone:"79204711666",password:""}),[h,f]=(0,o.useState)(null),[v,k]=(0,o.useState)({balance:null,id:null});(0,o.useEffect)(()=>{b({...m,password:c.generate(9)})},[]);let y=async()=>{await (0,x.Mg)(h),await a()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"overflow-y-auto",children:[(0,r.jsx)("div",{className:"flex w-full border-b border-[#cccccc]",children:["Номер телефона","Баланс","Заездов в день","Действия"].map((e,t)=>(0,r.jsx)("div",{className:(0,n.Z)("lg:text-center flex items-center gap-1.5 text-black/40 py-3 basis-1/4",{"px-4 border-l-black-low-opacity-gradient justify-center":0!==t}),children:(0,r.jsx)("p",{children:e})},t))}),t.map(e=>(0,r.jsx)(g,{phone:e.phone,balance:e.data.balance,changeBalanceUser:k,races:e.races,deleteDriver:()=>{u({...d,deleteDriver:!0}),f(e.id)},editDriver:()=>{u({...d,editDriver:!0}),f(e.id)},id:e.id,updateDrivers:a},e.phone))]}),(0,r.jsxs)(i.Z,{trigger:d.editDriver,setTrigger:e=>u({...d,editDriver:e}),title:"Редактирование водителя",children:[(0,r.jsxs)("div",{className:"flex-middle flex-col gap-3",children:[(0,r.jsx)("span",{children:"Укажите номер телефона водителя, он необходим для доступа в приложение. Пароль сгенерирован автоматически."}),(0,r.jsx)("span",{children:"Передайте водителю данные для доступа."})]}),(0,r.jsx)(l.Z,{label:"Номер телефона",value:t.map(e=>{if(e.id===h)return e.phone}),setValue:e=>b({...m,phone:e.replace(/[\s-()+]/g,"")}),placeholder:"+7 (___) ___-__-__",mask:"+7 (999) 999-99-99",type:"mask-input",getOnlyNumber:!0}),(0,r.jsx)("div",{className:"w-[388px] md:w-full",children:(0,r.jsx)(s.Z,{type:"success",clickHandler:()=>u({...d,editDriver:!1}),children:"Обновить"})})]}),(0,r.jsxs)(i.Z,{trigger:d.deleteDriver,setTrigger:e=>u({...d,deleteDriver:e}),title:"Удаление аккаунта",children:[(0,r.jsx)("div",{className:"flex-middle flex-col gap-3",children:"Вы уверены, что хотите удалить аккаунт:"}),(0,r.jsx)("div",{className:"flex-middle text-lg text-black-100 font-semibold",children:t.map(e=>{if(e.id===h)return(0,r.jsx)("span",{children:(0,p.default)(e.phone)},e.id)})}),(0,r.jsxs)("div",{className:"w-[388px] md:w-full gap-4 flex flex-col",children:[(0,r.jsx)(s.Z,{type:"danger",clickHandler:async()=>{u({...d,deleteDriver:!1}),await y()},children:"Удалить"}),(0,r.jsx)(s.Z,{type:"secondary",clickHandler:()=>u({...d,deleteDriver:!1}),children:"Отмена"})]})]})]})}a(25827)},80476:function(e,t,a){a.d(t,{Lu:function(){return o},Mg:function(){return c},SL:function(){return i},jT:function(){return s},n5:function(){return l}});var r=a(50117),n=a(30604);async function l(e){let t=await r.b.post("/api/v2/organizations/".concat((0,n.v)("organization_id"),"/users"),e);try{if(200===t.status)return!0;return console.log("Неудачное заполнение данных:",t.status),!1}catch(e){return console.log("Неудачное заполнение данных:",e),!1}}async function c(e){let t=await r.b.delete("/api/v2/organizations/".concat((0,n.v)("organization_id"),"/users/").concat(e));try{if(200===t.status)return!0;return console.log("Неудачное удаление пользователя:",t.status),!1}catch(e){return console.log("Неудачное удаление пользователя:",e),!1}}async function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,a=await r.b.get("/api/v2/organizations/".concat((0,n.v)("organization_id"),"/users?role_id=0&page=").concat(e,"&per_page=").concat(t));try{if(200===a.status)return a.data.data;return console.log("Неудачное заполнение данных:",a.status),[]}catch(e){return console.log("Неудачное заполнение данных:",e),[]}}async function i(e){let t=await r.b.post("/api/v2/organizations/".concat((0,n.v)("organization_id"),"/set-day-auto-balance"),e);try{if(200===t.status)return!0;return console.log("Неудачное заполнение данных:",t.status),!1}catch(e){return console.log("Неудачное заполнение данных:",e),!1}}async function o(e,t){let a=await r.b.post("/api/v2/organizations/".concat((0,n.v)("organization_id"),"/users/").concat(t,"/set-balance"),e);try{if(200===a.status)return!0;return console.log("Неудачное заполнение данных:",a.status),!1}catch(e){return console.log("Неудачное заполнение данных:",e),!1}}},25827:function(e,t,a){a.d(t,{D2:function(){return l},Jp:function(){return s},cK:function(){return c}});var r=a(30604),n=a(50117);async function l(){try{let e=await n.b.get("".concat("https://eco.null-it.com","/api/v2/organizations/").concat((0,r.v)("organization_id")));if(200===e.status)return e.data.data;return console.error("Ошибка при получении данных об организации:",e.status),!1}catch(e){return console.error("Ошибка при получении данных об организации:",e),!1}}async function c(){try{let e=await n.b.get("".concat("https://eco.null-it.com","/api/v2/organizations/").concat((0,r.v)("organization_id"),"/registration/get-pay-data"));if(200===e.status)return e.data.organization_pay_data;return console.error("Ошибка при отправке get-pay-data:",e.status),!1}catch(e){return console.error("Ошибка при отправке get-pay-data:",e),!1}}async function s(e){try{let t=await n.b.post("".concat("https://eco.null-it.com","/api/v2/organizations/").concat((0,r.v)("organization_id"),"/invoices/create"),e);if(200===t.status||201===t.status)return t.data;return console.log("res",t),alert(t),!1}catch(e){return alert(e.response.data.message),!1}}},773:function(e,t,a){a.d(t,{Z:function(){return s}});var r=a(57437),n=a(16691),l=a.n(n),c=a(57042);function s(e){let{type:t,children:a,icon:n,clickHandler:s,disabled:i=!1}=e;switch(console.log("disabled",i),t){case"medium-gray":return(0,r.jsx)("button",{onClick:s,className:"duration-500 hover:opacity-75 rounded-lg px-2 py-1 text-sm text-black-100 bg-black/5",disabled:i,children:a});case"medium-black":return(0,r.jsx)("button",{onClick:s,className:"duration-500 hover:opacity-75 rounded-lg px-2 py-1 text-sm text-white bg-black-100",disabled:i,children:a});case"success-secondary":return(0,r.jsx)("button",{onClick:s,className:"hover:bg-green--main hover:text-white duration-500 px-2 py-1 text-sm text-center w-full rounded-lg text-green--main border border-green--main",disabled:i,children:a});case"danger-secondary":return(0,r.jsx)("button",{onClick:s,className:"hover:bg-red--secondary hover:text-white duration-500 px-2 py-[13px] text-center w-full rounded-lg text-red--secondary border border-red--secondary",disabled:i,children:a});default:return(0,r.jsxs)("button",{onClick:s,className:(0,c.Z)("flex-middle gap-2 duration-300 hover:opacity-75  p-2 text-lg font-semibold text-center w-full rounded-lg",{"text-white bg-green--main":"success"===t,"text-white bg-red--secondary":"danger"===t,"text-black-100 bg-black/5":"secondary"===t},"max-[430px]:text-[16px]"),disabled:i,children:["arrow-left"===n&&(0,r.jsx)(l(),{width:20,height:20,src:"/img/icons/".concat(n,".svg"),alt:"Стрелка влево"}),a,"arrow-right"===n&&(0,r.jsx)(l(),{width:20,height:20,src:"/img/icons/".concat(n,".svg"),alt:"Стрелка вправо"})]})}}},77469:function(e,t,a){a.d(t,{Z:function(){return s}});var r=a(57437),n=a(2265),l=a(16691),c=a.n(l);function s(e){let{isCurrent:t,setIsCurrent:a,title:l,opinion:s,size:i,errorTitle:o,defaultState:d}=e,[u,x]=(0,n.useState)(!!d);return"small"===i?(0,r.jsxs)("div",{className:"flex items-center gap-6 md:gap-3.5",children:[u?(0,r.jsx)("div",{onClick:()=>x(!1),className:"flex-middle cursor-pointer bg-black-100 border border-black-100 min-w-[14px] min-h-[14px] rounded-[3px]",children:(0,r.jsx)(c(),{width:6,height:4,src:"/img/icons/checkmark-for-checkbox.svg",alt:"Галочка"})}):(0,r.jsx)("div",{onClick:()=>x(!0),className:"cursor-pointer bg-[#F7F9FB] border border-black/20 min-w-[14px] min-h-[14px] rounded-[3px]"}),l&&s&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-black-100",children:l}),(0,r.jsx)("p",{className:"text-black/40",children:s})]})]}):(0,r.jsxs)("div",{className:"flex items-center gap-6 md:gap-3.5",children:[u?(0,r.jsx)("div",{onClick:()=>{x(!1),a(!1)},className:"flex-middle cursor-pointer bg-black-100 border border-black-100 min-w-[18px] min-h-[18px] rounded",children:(0,r.jsx)(c(),{width:8,height:6,src:"/img/icons/checkmark-for-checkbox.svg",alt:"Галочка"})}):(0,r.jsx)("div",{onClick:()=>{x(!0),a(!0)},className:"cursor-pointer bg-[#F7F9FB] border border-black/20 min-w-[18px] min-h-[18px] rounded"}),l&&s&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-black-100"+(o?" text-red-600":""),children:l}),(0,r.jsx)("p",{className:"text-black/40",dangerouslySetInnerHTML:{__html:s}})]})]})}},70970:function(e,t,a){a.d(t,{Z:function(){return o}});var r=a(57437),n=a(16691),l=a.n(n),c=a(57042),s=a(57945),i=a.n(s);function o(e){let{disabled:t,value:a,setValue:n,type:s,label:o,placeholder:d,getOnlyNumber:u,invalidValue:x="",dataFocus:p,mask:g}=e;switch(s){case"one-number":return(0,r.jsx)("input",{tabIndex:p.split("-")[1],"data-focus":p,className:"focus:border-black/20 text-center w-[58px] h-[58px] flex-middle rounded-lg font-semibold text-2xl leading-[150%] border border-solid border-black/10 bg-white",type:"number",defaultValue:a,onChange:e=>{let t=document.querySelectorAll('[data-focus^="focus-"]');if(""===e.target.value?n(e.target.value):n(e.target.value.at(-1)),t.length>0){let a=Number(e.target.getAttribute("data-focus").split("-")[1])-1;t[a===t.length-1?0:a+1].focus()}}});case"big-input:disabled":return(0,r.jsxs)("div",{className:"relative w-[620px] lg:w-full",children:[o&&(0,r.jsx)("p",{className:"text-black/40 absolute top-4 left-5",children:o}),(0,r.jsx)("input",{className:"bg-white h-[74px] rounded-lg px-5 pt-[38px] pb-4 border border-solid border-black/10 text-sm text-black/20 placeholder:text-black/20 w-full focus:border-black/20",placeholder:d,disabled:!0,defaultValue:a}),(0,r.jsx)(l(),{className:"absolute bottom-4 right-5",width:16,height:16,src:"/img/icons/checkmark.svg",alt:"Подтверждено"})]});case"big-input":return(0,r.jsxs)("div",{className:"relative w-[620px] lg:w-full",children:[o&&(0,r.jsx)("p",{className:"text-black/40 absolute top-4 left-5",children:o}),(0,r.jsx)("input",{className:"bg-white h-[74px] rounded-lg px-5 pt-[38px] pb-4 border border-solid border-black/10 text-sm text-black-100 placeholder:text-black/20 w-full focus:border-black/20",placeholder:d,onChange:e=>n(e.target.value),defaultValue:a})]});case"mask-input":return(0,r.jsxs)("div",{className:"w-full flex flex-col gap-3",children:[o&&(0,r.jsx)("p",{className:"text-sm font-semibold text-black-100",children:o}),(0,r.jsx)(i(),{mask:g,maskChar:" ",value:a,onChange:e=>n(e.target.value),className:(0,c.Z)("text-sm text-black-100 placeholder:text-black/20 w-full rounded-lg px-4 py-2.5 border border-solid border-black/10 focus:border-black/20",{"text-black/20":t}),disabled:!!t,children:e=>(0,r.jsx)("input",{type:"text",placeholder:d,...e})})]});default:return console.log("invalidValue",x),(0,r.jsxs)("div",{className:"w-full flex flex-col gap-3",children:[o&&(0,r.jsx)("p",{className:"text-sm font-semibold text-black-100",children:o}),(0,r.jsx)("input",{type:u?"number":"text",className:(0,c.Z)("text-sm text-black-100 placeholder:text-black/20 w-full rounded-lg px-4 py-2.5 border border-solid border-black/10 focus:border-black/20",{"text-black/20":t}),placeholder:d,value:a,disabled:!!t,onChange:e=>n(e.target.value),style:{borderColor:x?"red":"inherit"}}),!!x&&(0,r.jsx)("span",{className:"text-sm",style:{color:"red"},children:x})]})}}},51178:function(e,t,a){a.d(t,{Z:function(){return s}});var r=a(57437),n=a(2265),l=a(62167),c=a(97870);function s(e){var t;let{trigger:a,setTrigger:s,title:i,children:o,classNameCustom:d}=e,u=(0,n.useRef)(null);return t=()=>s(!1),(0,n.useEffect)(()=>{let e=e=>{!u.current||u.current.contains(e.target)||t(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[u,t]),(0,n.useEffect)(()=>{a?document.getElementsByTagName("html")[0].style.overflowY="hidden":document.getElementsByTagName("html")[0].style.overflowY="auto"},[a]),(0,r.jsx)(l.M,{children:a&&(0,r.jsx)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,r.jsx)("div",{className:"fixed top-0 left-0 bottom-0 right-0 bg-black/25 flex-middle z-40 p-3",children:(0,r.jsxs)("div",{ref:u,className:"md:px-8 md:py-8 bg-white rounded-2xl px-36 py-14 flex-middle flex-col gap-7 max-w-[676px] "+d,children:[(0,r.jsxs)("div",{className:"flex-middle flex-col gap-2 max-w-[330px]",children:[(0,r.jsx)("h6",{className:"text-black-100 text-2xl font-semibold text-center",children:i}),(0,r.jsx)("p",{className:"text-black/40 text-sm text-center",children:o[0]})]}),o.slice(1)]})})})})}},50117:function(e,t,a){a.d(t,{b:function(){return l}});var r=a(29222),n=a(30604);let l=r.Z.create({baseURL:"https://eco.null-it.com"});l.interceptors.request.use(e=>(e.headers.Authorization="Bearer "+(0,n.v)("bearer_token"),e))},30604:function(e,t,a){a.d(t,{v:function(){return r}});function r(e){if("undefined"!=typeof document){let t=document.cookie.match(RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}}},83669:function(e,t,a){function r(e){let t=e.replace(/\D/g,"");return 11!==t.length?(console.error("Incorrect phone number format"),e):"+".concat(t.slice(0,1)," (").concat(t.slice(1,4),") ").concat(t.slice(4,7),"-").concat(t.slice(7,9),"-").concat(t.slice(9))}function n(e){let t=new Date(e),a=t.getDate().toString().padStart(2,"0"),r=(t.getMonth()+1).toString().padStart(2,"0"),n=t.getFullYear(),l=t.getHours().toString().padStart(2,"0"),c=t.getMinutes().toString().padStart(2,"0");return"".concat(a,".").concat(r,".").concat(n," ").concat(l,":").concat(c)}a.d(t,{p:function(){return n},u:function(){return r}})}}]);